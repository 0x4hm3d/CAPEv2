{% if debugger %}
<h4>Debugger Output</h4>
<ul>
    {% for process in debugger.processtree|proctreetolist %}
        {% if process.startchildren %}
        <ul>
        {% elif process.endchildren %}
        </ul>
        {% else %}
        <li>
        <strong><a href="javascript:show_tab('#dbg_{{process.pid}}');">{{process.name}}</a></strong> {{process.pid}}
        {% if process.commandline %}
          <i>{{ process.commandline }}</i>
        {% endif %}
        </li>
        {% endif %}
    {% endfor %}
    </ul>

<ul class="nav nav-tabs">
    {% for process in debugger.processes %}
        {% for key, value in debugger_logs.items %}
                {% if key == process.process_id %}
                    <li class="nav-item"><a class="nav-link {% if forloop.counter == 1%} active {% endif %}" href="#dbg_{{process.process_id}}" data-toggle="tab"><span class="fa fa-cogs"></span> {{process.process_name}} ({{process.process_id}})</a></li>
                {% endif %}
        {% endfor %}
    {% endfor %}
</ul>

<div class="tab-content">
    {% for process in debugger.processes %}
        {% for key, value in debugger_logs.items %}
            {% if key == process.process_id %}
            <div class="tab-pane fade {% if forloop.parentloop.counter == 1 %} show active {% endif %}" id="dbg_{{key}}">
                <div class="alert alert-danger center"><a class="btn btn-secondary btn-small" href="{% url "file" "debugger_log" id key %}">Download Log</a></div>
                <pre>{{value}}</pre>
            </div>
            {% endif %}
        {% endfor %}
    {% endfor %}
</div>
{% endif %}
